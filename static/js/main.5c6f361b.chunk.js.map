{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem.js","services/imageAPI.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","App.js","index.js"],"names":["Searchbar","state","query","handleChange","e","setState","target","value","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","this","type","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","id","tags","webformatURL","src","alt","api","fetchImage","page","url","axios","get","catch","response","console","log","data","status","headers","request","message","config","then","hits","Button","onClick","ImageGallery","images","loader","fetchOnSubmitForm","prevSearchQuery","nextSearchQuery","imageAPI","length","warn","fetchOnLoadMoreBtn","prevPage","nextPage","prevState","scrollToBottom","handleClickLoadMore","window","scrollTo","top","document","documentElement","scrollHeight","behavior","findImageById","nodeName","findElem","onOpenModal","prevProps","map","index","visible","color","height","width","Modal","handleKeyDown","code","onCloseModal","handleBackdropClick","currentTarget","addEventListener","removeEventListener","image","largeImageURL","App","showModal","imageModal","handleSearch","openModal","closeModal","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5c6f361b.chunk.js","sourcesContent":["import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n  handleChange = e => {\n    this.setState({ query: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.state.query.trim() === '') {\n      toast.error('This field cannot be empty');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            onChange={this.handleChange}\n            value={this.state.query}\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","export default function ImageGalleryItem({ id, tags, webformatURL }) {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        id={id}\n        src={webformatURL}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  );\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '19184321-ac300e61d51c0cc0f6b691bfb';\n\nconst fetchImage = (query, page) => {\n  const url = `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n  return axios\n    .get(url)\n    .catch(function (error) {\n      if (error.response) {\n        // The request was made and the server responded with a status code\n        // that falls out of the range of 2xx\n        console.log('error.response.data', error.response.data);\n        console.log('error.response.status', error.response.status);\n        console.log('error.response.headers', error.response.headers);\n      } else if (error.request) {\n        // The request was made but no response was received\n        // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n        // http.ClientRequest in node.js\n        console.log('error.request', error.request);\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        console.log('Error', error.message);\n      }\n      console.log('error.config', error.config);\n    })\n    .then(response => {\n      return response.data.hits;\n    });\n};\n\nconst api = { fetchImage };\nexport default api;\n\n//  console.log(response);\n//  if (response.status >= 200 && response.status < 300) {\n//    return response.data.hits;\n//  }\n//  return Promise.reject(new Error(`Not found image ${query}`));\n","import PropTypes from 'prop-types';\n\nfunction Button({ onClick }) {\n  return (\n    <button onClick={onClick} type=\"button\" className=\"Button\">\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import ImageGalleryItem from './ImageGalleryItem';\nimport { Component, Fragment } from 'react';\nimport imageAPI from '../../services/imageAPI';\nimport Button from '../Button/Button';\nimport { toast } from 'react-toastify';\n\nimport Loader from 'react-loader-spinner';\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    status: 'idle',\n    page: 1,\n    error: null,\n    loader: true,\n  };\n\n  fetchOnSubmitForm = (prevSearchQuery, nextSearchQuery) => {\n    if (prevSearchQuery !== nextSearchQuery) {\n      this.setState({ loader: true });\n      imageAPI\n        .fetchImage(nextSearchQuery, 1)\n        .then(images => {\n          this.setState({\n            images: images,\n            status: 'resolved',\n            loader: false,\n          });\n          if (images.length === 0) {\n            toast.warn(\n              'No results were found for this request, please enter a more specific request',\n            );\n          }\n        })\n        .catch(e => console.log(e));\n    }\n  };\n\n  fetchOnLoadMoreBtn = (prevPage, nextPage, nextSearchQuery, prevState) => {\n    if (prevPage !== nextPage) {\n      this.setState({ loader: true });\n\n      imageAPI\n        .fetchImage(nextSearchQuery, nextPage)\n        .then(images => {\n          this.setState({\n            images: [...prevState.images, ...images],\n            status: 'resolved',\n            loader: false,\n          });\n\n          this.scrollToBottom();\n        })\n        .catch(error => {\n          this.setState({ status: 'rejected' });\n          console.log(error);\n        });\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevSearchQuery = prevProps.query;\n    const nextSearchQuery = this.props.query;\n\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    this.fetchOnSubmitForm(prevSearchQuery, nextSearchQuery);\n    this.fetchOnLoadMoreBtn(prevPage, nextPage, nextSearchQuery, prevState);\n  }\n\n  handleClickLoadMore = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  scrollToBottom = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  findImageById = e => {\n    if (e.target.nodeName !== 'IMG') {\n      return;\n    }\n    const { images } = this.state;\n\n    const findElem = images[e.target.id];\n\n    this.props.onOpenModal(findElem);\n  };\n\n  render() {\n    const { status, images, loader } = this.state;\n\n    if (status === 'idle') {\n      return <></>;\n    }\n    if (status === 'resolved') {\n      return (\n        <Fragment>\n          <ul onClick={this.findImageById} className=\"ImageGallery\">\n            {images.map(({ tags, webformatURL }, index) => (\n              <ImageGalleryItem\n                key={index}\n                id={index}\n                tags={tags}\n                webformatURL={webformatURL}\n              />\n            ))}\n          </ul>\n          {images.length > 0 && <Button onClick={this.handleClickLoadMore} />}\n\n          <Loader\n            visible={loader}\n            className=\"Loader\"\n            type=\"ThreeDots\"\n            color=\"#00BFFF\"\n            height={80}\n            width={80}\n          />\n        </Fragment>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  query: PropTypes.string.isRequired,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onCloseModal();\n    }\n  };\n\n  handleBackdropClick = e => {\n    console.log(e.target);\n    if (e.currentTarget === e.target) {\n      this.props.onCloseModal();\n    }\n  };\n  render() {\n    const { largeImageURL, tags } = this.props.image;\n    return (\n      <div onClick={this.handleBackdropClick} className=\"Overlay\">\n        <div className=\"Modal\">\n          <img src={largeImageURL} alt={tags} />\n        </div>\n      </div>\n    );\n  }\n}\n","import Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport { Component } from 'react';\nimport Modal from './components/Modal/Modal';\n\nclass App extends Component {\n  state = {\n    query: '',\n    showModal: false,\n    imageModal: {},\n  };\n\n  handleSearch = query => {\n    this.setState({ query: query });\n  };\n\n  openModal = imageModal => {\n    this.setState({ showModal: true, imageModal });\n  };\n\n  closeModal = () => {\n    this.setState({ showModal: false });\n  };\n\n  render() {\n    const { query, showModal, imageModal } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSearch} />\n        <ImageGallery query={query} onOpenModal={this.openModal} />\n\n        <ToastContainer position=\"top-left\" autoClose={3000} />\n        {showModal && (\n          <Modal image={imageModal} onCloseModal={this.closeModal} />\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}