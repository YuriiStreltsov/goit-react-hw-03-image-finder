(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{27:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),o=a(4),s=a.n(o),i=(a(27),a(5)),l=a(6),u=a(9),h=a(8),m=a(7),d=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleChange=function(t){e.setState({query:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.query.trim()?(e.props.onSubmit(e.state.query),e.setState({query:""})):m.b.error("This field cannot be empty")},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(r.jsx)("header",{className:"Searchbar",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(r.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(r.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(r.jsx)("input",{onChange:this.handleChange,value:this.state.query,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),b=a(11);function j(e){var t=e.id,a=e.tags,n=e.webformatURL;return Object(r.jsx)("li",{className:"ImageGalleryItem",children:Object(r.jsx)("img",{id:t,src:n,alt:a,className:"ImageGalleryItem-image"})})}var p=a(20),f=a.n(p),g={fetchImage:function(e,t){var a="".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("19184321-ac300e61d51c0cc0f6b691bfb","&image_type=photo&orientation=horizontal&per_page=12");return f.a.get(a).then((function(t){return console.log(t),t.status>=200&&t.status<300?t.data.hits:Promise.reject(new Error("\u041d\u0435\u0442 \u043f\u043e\u043a\u0435\u043c\u043e\u043d\u0430 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e)))}))}};var O=function(e){var t=e.onClick;return Object(r.jsx)("button",{onClick:t,type:"button",className:"Button",children:"Load more"})},y=a(21),v=a.n(y),S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={images:[],status:"idle",page:1,error:null,loader:!0},e.handleClickLoadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.scrollToBottom=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.query,n=this.props.query,c=t.page,o=this.state.page;r!==n&&(this.setState({loader:!0}),g.fetchImage(n,1).then((function(e){a.setState({images:e,status:"resolved",loader:!1}),0===e.length&&m.b.warn("No results were found for this request, please enter a more specific request")})).catch((function(e){return a.setState({error:e,status:"rejected"})}))),c!==o&&(this.setState({loader:!0}),g.fetchImage(n,o).then((function(e){a.setState({images:[].concat(Object(b.a)(t.images),Object(b.a)(e)),status:"resolved",loader:!1}),a.scrollToBottom()})).catch((function(e){return a.setState({error:e,status:"rejected"})})))}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.images,c=e.error,o=e.loader;return"idle"===t?Object(r.jsx)(r.Fragment,{}):"resolved"===t?Object(r.jsxs)(n.Fragment,{children:[Object(r.jsx)("ul",{className:"ImageGallery",children:a.map((function(e,t){var a=e.tags,n=e.webformatURL;return Object(r.jsx)(j,{id:t,tags:a,webformatURL:n},t)}))}),a.length>0&&Object(r.jsx)(O,{onClick:this.handleClickLoadMore}),Object(r.jsx)(v.a,{visible:o,className:"Loader",type:"ThreeDots",color:"#00BFFF",height:80,width:80})]}):"rejected"===t?Object(r.jsx)("p",{children:c.message}):void 0}}]),a}(n.Component),x=(a(67),a(68),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={query:""},e.handleSearch=function(t){e.setState({query:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.query;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d,{onSubmit:this.handleSearch}),Object(r.jsx)(S,{query:e}),Object(r.jsx)(m.a,{position:"top-left",autoClose:3e3})]})}}]),a}(n.Component));s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.00af8a47.chunk.js.map